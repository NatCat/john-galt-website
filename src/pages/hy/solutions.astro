---
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import "../../styles/tailwind.css";

import { getLocaleFromUrl, getPageBySlugAndLocale } from "../../lib/i18n";
import { getTranslation } from "../../lib/translations";

const locale = getLocaleFromUrl(Astro.url);
const pageEntry = await getPageBySlugAndLocale('pages', 'solutions', locale).catch(() => null);
const pageData = pageEntry?.data ?? {};
const { Content } = pageEntry ? await pageEntry.render() : { Content: null };
---

<html lang={locale}>
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content={Astro.generator} />
    <meta name="description" content={pageData.description || 'Our comprehensive industrial automation solutions'} />
    <title>{pageData.title || getTranslation(locale, 'solutions')} - John Galt</title>
  </head>
  <body class="min-h-screen bg-white">
    <Header locale={locale} />
    <main class="pt-20">
      <section class="bg-gradient-to-b from-[#2d4a7c]/5 to-white py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div class="text-center max-w-3xl mx-auto">
            <h1 class="text-4xl md:text-5xl font-serif text-gray-900 mb-6">
              {pageData.title || getTranslation(locale, 'solutions')}
            </h1>
            {pageData.description && (
              <p class="text-xl text-gray-600">{pageData.description}</p>
            )}
          </div>
        </div>
      </section>

      <section class="py-20 bg-white">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
          {Content ? (
            <div class="prose prose-lg max-w-none">
              <Content />
            </div>
          ) : (
            <p class="text-gray-600">Content coming soon...</p>
          )}
        </div>
      </section>
    </main>
    <Footer locale={locale} />
  </body>
</html>
