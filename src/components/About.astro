---
const defaultAbout = {
  tag: 'About Us',
  heading: 'Your Trusted Partner in Industrial Automation',
  paragraphs: [
    'John Galt is a leading group of organizations specializing in comprehensive industrial automation solutions. We combine expertise in mechanical engineering, electrical systems, software development, and international sourcing to deliver turnkey solutions for the food processing industry.',
    'Our integrated approach ensures seamless project execution from initial design through commissioning and ongoing support. With deep industry knowledge and commitment to innovation, we help our clients achieve operational excellence and competitive advantage.',
  ],
  capabilities: [
    'Complete project management from design to implementation',
    '24/7 technical support and maintenance services',
    'Custom engineering solutions tailored to your needs',
    'International component sourcing and logistics',
    'Compliance with global industry standards',
    'Training and knowledge transfer programs',
  ],
  stats: [
    { icon: 'Users', value: '50+', label: 'Expert Engineers' },
    { icon: 'Award', value: '15+', label: 'Years Experience' },
    { icon: 'Globe', value: '25+', label: 'Countries Served' },
    { icon: 'CheckCircle2', value: '200+', label: 'Completed Projects' },
  ],
};

const iconPaths: Record<string, string> = {
  Users: 'M8 4a4 4 0 118 0 4 4 0 01-8 0zM3 20a7 7 0 0114 0v1H3v-1z',
  Award: 'M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z',
  Globe: 'M21 12a9 9 0 11-18 0 9 9 0 0118 0z M3.6 9h16.8 M3.6 15h16.8 M9 3.6a15.3 15.3 0 010 16.8 M15 3.6a15.3 15.3 0 010 16.8',
  CheckCircle2: 'M9 12.75l2.25 2.25 4.5-4.5m6 2.25A9 9 0 118 4.5a9 9 0 0118 9z',
};

const incoming = Astro.props.data ?? {};
const about = {
  ...defaultAbout,
  ...incoming,
  paragraphs: incoming.paragraphs && incoming.paragraphs.length > 0 ? incoming.paragraphs : defaultAbout.paragraphs,
  capabilities: incoming.capabilities && incoming.capabilities.length > 0 ? incoming.capabilities : defaultAbout.capabilities,
  stats: (incoming.stats && incoming.stats.length > 0 ? incoming.stats : defaultAbout.stats).map((stat, index) => ({
    ...defaultAbout.stats[index % defaultAbout.stats.length],
    ...stat,
  })),
};
---

<section id="about" class="py-20 bg-white">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="grid lg:grid-cols-2 gap-12 items-center">
      <!-- Left Content -->
      <div>
        {about.tag && (
          <div class="inline-block px-4 py-2 bg-[#2d4a7c]/10 text-[#2d4a7c] rounded-full mb-4">
            {about.tag}
          </div>
        )}
        <h2 class="text-gray-900 mb-6 text-3xl md:text-4xl font-serif">
          {about.heading}
        </h2>
        {about.paragraphs.map((paragraph) => (
          <p class="text-gray-600 mb-6">{paragraph}</p>
        ))}

        <div class="space-y-3">
          {about.capabilities.map((capability) => (
            <div class="flex items-start gap-3">
              <svg class="text-[#2d4a7c] flex-shrink-0 mt-1 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              <span class="text-gray-700">{capability}</span>
            </div>
          ))}
        </div>
      </div>

      <!-- Right Stats -->
      <div class="grid grid-cols-2 gap-6">
        {about.stats.map((stat, index) => {
          const path = iconPaths[stat.icon] ?? iconPaths[defaultAbout.stats[index % defaultAbout.stats.length].icon];
          return (
            <div class="text-center p-8 rounded-xl border hover:shadow-lg transition-shadow">
              <div class="bg-[#2d4a7c]/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg class="text-[#2d4a7c] w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d={path}></path>
                </svg>
              </div>
              <div class="text-[#2d4a7c] mb-2 text-2xl font-semibold">{stat.value}</div>
              <div class="text-sm text-gray-600">{stat.label}</div>
            </div>
          );
        })}
      </div>
    </div>
  </div>
</section>

